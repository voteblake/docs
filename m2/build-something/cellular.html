
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Cellular Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-toc/page-toc.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../technical-references/power.html" />
    
    
    <link rel="prev" href="../technical-references/communication.html" />
    

    </head>
    <body>
        
<header class="main-header">
    <h1 class="main-header__title"><a href="https://macchina.cc" class="main-header__link"><img src="/images/logo.svg" alt="Macchina logo" class="main-header__logo"></a> Docs</h1>
</header>

<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    M2 Docs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../">
            
                <a href="../">
            
                    
                    About the M2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../disclaimer.html">
            
                <a href="../disclaimer.html">
            
                    
                    Disclaimer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../getting-started/">
            
                <a href="../getting-started/">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../getting-started/arduino.html">
            
                <a href="../getting-started/arduino.html">
            
                    
                    Arduino IDE Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" >
            
                <span>
            
                    
                    Detailed Reference
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../technical-references/installation.html">
            
                <a href="../technical-references/installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../technical-references/processor.html">
            
                <a href="../technical-references/processor.html">
            
                    
                    Processor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.2.1" data-path="../technical-references/pin-mapping.html">
            
                <a href="../technical-references/pin-mapping.html">
            
                    
                    Pin Mapping
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../technical-references/interfaces.html">
            
                <a href="../technical-references/interfaces.html">
            
                    
                    Automotive Interfaces
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="../technical-references/communication.html">
            
                <a href="../technical-references/communication.html">
            
                    
                    Communication
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.5.4.1" data-path="cellular.html">
            
                <a href="cellular.html">
            
                    
                    Cellular
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5.5" data-path="../technical-references/power.html">
            
                <a href="../technical-references/power.html">
            
                    
                    Power
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.6" data-path="../technical-references/memory.html">
            
                <a href="../technical-references/memory.html">
            
                    
                    Storage/Memory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.7" data-path="../technical-references/12vio.html">
            
                <a href="../technical-references/12vio.html">
            
                    
                    12V IO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.8" data-path="../technical-references/leds-buttons.html">
            
                <a href="../technical-references/leds-buttons.html">
            
                    
                    LEDS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.9" data-path="../technical-references/enclosures.html">
            
                <a href="../technical-references/enclosures.html">
            
                    
                    Enclosures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.10" data-path="../technical-references/byob.html">
            
                <a href="../technical-references/byob.html">
            
                    
                    Breakout Board
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.11" data-path="../technical-references/open-source.html">
            
                <a href="../technical-references/open-source.html">
            
                    
                    Schematics and Source
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                

                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Cellular</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="digi-xbee-cellular-lte-modem-example">Digi XBee Cellular LTE modem example</h1>
<p>This tutorial will show how to connect your car to the internet using M2, a <a href="(https:/www.digi.com/products/xbee-rf-solutions/embedded-cellular-modems/digi-xbee-cellular">Digi XBee Cellular LTE modem</a>) and a SIM card. You may also wish to reference the <a href="https://www.digi.com/pdf/ds_xbee-cellular.pdf" target="_blank">modem&apos;s datasheet</a>.</p>
<h2 id="setup">Setup</h2>
<p>The modem plugs directly into the 20 pin wireless socket on top of your M2. Make sure that it is oriented correctly with the angled chamfers pointed toward the USB/SD side of your M2.  Please make sure your M2 is not being powered when plugging in the modem.</p>
<p>Before plugging the modem into your M2, make sure to install a SIM card. This modem uses a 4FF (Nano) size SIM card.</p>
<p><img src="../../images/DIGI_modem.png" width="640"></p>
<h2 id="power">Power</h2>
<p>As you work with the Digi modem, please keep in mind that it requires more power that your computer can provide directly over a USB port. You have 2 options:</p>
<ul>
<li>Power your M2 via the OBD2 port (i.e. plugging into your car or some sort of adapter)</li>
<li>Use a powered USB hub. This option is preferable for desktop development. We&apos;ve had good luck with this inexpensive hub:</li>
</ul>
<p><a href="https://www.amazon.com/AmazonBasics-Port-2-5A-power-adapter/dp/B00DQFGH80" target="_blank">https://www.amazon.com/AmazonBasics-Port-2-5A-power-adapter/dp/B00DQFGH80</a></p>
<h2 id="basic-communication">Basic communication</h2>
<p>A good first step is to check that everything is working it to talk to the modem from your computer, through your M2. For this, you need to program your M2 with a simple sketch that will forward data between the 2 serial ports:</p>
<ul>
<li><strong>USBSerial</strong>, the USB connection between the M2 processor and your computer.</li>
<li><strong>Serial0</strong>, the Serial connection between the M2 processor and the XBee socket pins</li>
</ul>
<p>This sketch will also make the GREEN LED blink as the <a href="https://www.digi.com/resources/documentation/digidocs/90001525/default.htm#reference/r_cell_associate_led.htm%3FTocPath%3DHardware%7C_____4" target="_blank">associate</a> pin of the modem toggles. The pin signals and locations for the modem can be found <a href="https://www.digi.com/resources/documentation/digidocs/90001525/default.htm#reference/r_pinouts_th.htm%3FTocPath%3DHardware%7CPin%2520signals%7C_____0" target="_blank">here</a>.</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> AssociateState = <span class="hljs-number">0</span>;            <span class="hljs-comment">// variable for reading the associate status</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  Serial.begin(<span class="hljs-number">9600</span>);              <span class="hljs-comment">// Serial port for XBEE socket</span>
  SerialUSB.begin(<span class="hljs-number">9600</span>);           <span class="hljs-comment">// Native USB port</span>
  pinMode(XBEE_MULT2, INPUT);      <span class="hljs-comment">// DIGI Associate PIN</span>
  pinMode(DS6, OUTPUT);            <span class="hljs-comment">// Green LED</span>
  pinMode(XBEE_RST, OUTPUT);
  digitalWrite(XBEE_RST, HIGH);    <span class="hljs-comment">// Make sure RESET is HIGH</span>
  pinMode(DS2, OUTPUT);
  digitalWrite(DS2, LOW);          <span class="hljs-comment">// Turns on Red LED</span>
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{

  <span class="hljs-keyword">if</span> (SerialUSB.available()) {     <span class="hljs-comment">// read from port 1, send to port 0:</span>
    <span class="hljs-keyword">int</span> inByte = SerialUSB.read();
    Serial.write(inByte);
  }

  <span class="hljs-keyword">if</span> (Serial.available()) {        <span class="hljs-comment">// read from port 0, send to port 1:</span>
    <span class="hljs-keyword">int</span> inByte = Serial.read();
    SerialUSB.write(inByte);
  }

  AssociateState = digitalRead(XBEE_MULT2);

  <span class="hljs-keyword">if</span> (AssociateState == HIGH) {
    digitalWrite(DS6, HIGH);       <span class="hljs-comment">// turn LED on:</span>
  } <span class="hljs-keyword">else</span> {
    digitalWrite(DS6, LOW);        <span class="hljs-comment">// turn LED off:</span>
  }
}
</code></pre>
<p>The second part to a basic communication test is the software on your computer. Digi offers a nice UI called XCTU to communicate with their products. Download the <a href="https://www.digi.com/products/xbee-rf-solutions/xctu-software/xctu" target="_blank">latest verison</a>.</p>
<p>Once downloaded and installed, launch XCTU and follow the instructions from <a href="https://www.digi.com/resources/documentation/digidocs/90001525/default.htm#tasks/t_add_device.htm%3FTocPath%3DGetting%2520started%2520with%2520the%2520XBee%2520Cellular%2520Modem%2520Development%2520Kit%7CConfigure%2520the%2520device%2520using%2520XCTU%7C_____1" target="_blank">Digi&apos;s documentation</a>.</p>
<p>From there, you can do all sorts of fun things, from sending an SMS to connecting to servers to posting data to a website. Several examples are found on <a href="https://www.digi.com/resources/documentation/digidocs/90001525/default.htm" target="_blank">Digi&apos;s documentation page</a>.</p>
<!--

#### A more advanced cellular project

The next step is to replace the commands coming from your computer with commands directly from M2. In other words, the processor on M2 will communicate with the modem without intervention. Let's do a more advanced project!

To be continued...

-->
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
<footer>
    Can't find what your are looking for?  <a href="https://github.com/macchina/docs/issue">Open an Issue on GitHub</a> or <a href="https://forum.macchina.cc/">ask on the Forum</a>.
    <br/><br/>
    This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
    All code samples in this work are released to the public domain using the <a href="http://creativecommons.org/publicdomain/zero/1.0/">Creative Commons CC0 Public Domain Dedication</a>.
</footer>

            </div>

            
                
                <a href="../technical-references/communication.html" class="navigation navigation-prev " aria-label="Previous page: Communication">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../technical-references/power.html" class="navigation navigation-next " aria-label="Next page: Power">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Cellular","level":"1.2.5.4.1","depth":4,"next":{"title":"Power","level":"1.2.5.5","depth":3,"path":"m2/technical-references/power.md","ref":"m2/technical-references/power.md","articles":[]},"previous":{"title":"Communication","level":"1.2.5.4","depth":3,"path":"m2/technical-references/communication.md","ref":"m2/technical-references/communication.md","articles":[{"title":"Cellular","level":"1.2.5.4.1","depth":4,"path":"m2/build-something/cellular.md","ref":"m2/build-something/cellular.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["ga","custom-favicon","edit-link","page-toc"],"pluginsConfig":{"search":{},"page-toc":{"position":"before-first","selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"favicon":"images/favicon.ico","custom-favicon":{},"ga":{"configuration":"auto","token":"UA-75126303-1"},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/macchina/docs/edit/master/"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"index.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"./styles/website.css"}},"file":{"path":"m2/build-something/cellular.md","mtime":"2017-10-09T03:54:52.155Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-10-09T03:55:50.609Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>


        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc/anchor-3.1.1.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc/page-toc.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

